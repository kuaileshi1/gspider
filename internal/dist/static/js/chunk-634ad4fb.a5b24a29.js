(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-634ad4fb"],{"0601":function(e,t,l){},ae33:function(e,t,l){"use strict";l.r(t);var o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loadData,expression:"loadData"}],attrs:{border:"",fit:"","highlight-current-row":""}},[l("el-col",{attrs:{span:12}},[l("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"right","label-width":"150px"}},[l("el-form-item",{attrs:{label:"任务名称",prop:"task_name"}},[l("el-input",{attrs:{placeholder:"请输入任务名称",disabled:e.isEdit},model:{value:e.form.task_name,callback:function(t){e.$set(e.form,"task_name",t)},expression:"form.task_name"}})],1),l("el-form-item",{attrs:{label:"任务规则",prop:"task_rule_name"}},[l("el-select",{attrs:{placeholder:"请选择规则名称",disabled:e.isEdit},model:{value:e.form.task_rule_name,callback:function(t){e.$set(e.form,"task_rule_name",t)},expression:"form.task_rule_name"}},e._l(e.ruleOpts,(function(e){return l("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),l("el-form-item",{attrs:{label:"任务描述"}},[l("el-input",{attrs:{type:"textarea",placeholder:"请输入任务描述",rows:2},model:{value:e.form.task_desc,callback:function(t){e.$set(e.form,"task_desc",t)},expression:"form.task_desc"}})],1),l("el-form-item",{attrs:{label:"定时执行"}},[l("el-input",{attrs:{placeholder:"* * * * * *"},model:{value:e.form.cron_spec,callback:function(t){e.$set(e.form,"cron_spec",t)},expression:"form.cron_spec"}})],1),l("el-form-item",{attrs:{label:"代理列表"}},[l("el-input",{attrs:{placeholder:"支持 socks5,http,https; 多个以逗号分割"},model:{value:e.form.proxy_urls,callback:function(t){e.$set(e.form,"proxy_urls",t)},expression:"form.proxy_urls"}})],1),l("el-form-item",{attrs:{label:"用户代理"}},[l("el-input",{attrs:{placeholder:"user agent"},model:{value:e.form.opt_user_agent,callback:function(t){e.$set(e.form,"opt_user_agent",t)},expression:"form.opt_user_agent"}})],1),l("el-form-item",{attrs:{label:"爬虫最大深度"}},[l("el-input-number",{attrs:{controls:!1},model:{value:e.form.opt_max_depth,callback:function(t){e.$set(e.form,"opt_max_depth",t)},expression:"form.opt_max_depth"}})],1),l("el-form-item",{attrs:{label:"允许访问的域名"}},[l("el-input",{attrs:{placeholder:"默认空为无限制"},model:{value:e.form.opt_allowed_domains,callback:function(t){e.$set(e.form,"opt_allowed_domains",t)},expression:"form.opt_allowed_domains"}})],1),l("el-form-item",{attrs:{label:"URL过滤"}},[l("el-input",{attrs:{placeholder:"默认空无限制，支持正则表达式"},model:{value:e.form.opt_url_filters,callback:function(t){e.$set(e.form,"opt_url_filters",t)},expression:"form.opt_url_filters"}})],1),l("el-form-item",{attrs:{label:"最大body值"}},[l("el-input-number",{staticClass:"fl",attrs:{controls:!1},model:{value:e.form.opt_max_body_size,callback:function(t){e.$set(e.form,"opt_max_body_size",t)},expression:"form.opt_max_body_size"}})],1),l("el-form-item",{attrs:{label:"请求超时时间"}},[l("el-input-number",{staticClass:"fl",attrs:{controls:!1},model:{value:e.form.opt_request_timeout,callback:function(t){e.$set(e.form,"opt_request_timeout",t)},expression:"form.opt_request_timeout"}})],1),l("el-form-item",{attrs:{label:"频率限制"}},[l("el-checkbox",{model:{value:e.form.limit_enable,callback:function(t){e.$set(e.form,"limit_enable",t)},expression:"form.limit_enable"}})],1),l("el-form-item",{attrs:{label:"域名glob匹配"}},[l("el-input",{attrs:{placeholder:"默认 *"},model:{value:e.form.limit_domain_glob,callback:function(t){e.$set(e.form,"limit_domain_glob",t)},expression:"form.limit_domain_glob"}})],1),l("el-form-item",{attrs:{label:"延迟"}},[l("el-input-number",{attrs:{controls:!1},model:{value:e.form.limit_delay,callback:function(t){e.$set(e.form,"limit_delay",t)},expression:"form.limit_delay"}})],1),l("el-form-item",{attrs:{label:"随机延迟"}},[l("el-input-number",{attrs:{controls:!1},model:{value:e.form.limit_random_delay,callback:function(t){e.$set(e.form,"limit_random_delay",t)},expression:"form.limit_random_delay"}})],1),l("el-form-item",{attrs:{label:"请求并发度"}},[l("el-input-number",{attrs:{controls:!1},model:{value:e.form.limit_parallelism,callback:function(t){e.$set(e.form,"limit_parallelism",t)},expression:"form.limit_parallelism"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary",loading:e.on_submit_loading,disabled:e.submit_disable},on:{click:e.on_submit_form}},[e._v(e._s(e.routeID?"更新":"创建"))])],1)],1)],1)],1)],1)},a=[],r=l("b199"),s=(l("0601"),"@@wavesContext");function i(e,t){function l(l){var o=Object.assign({},t.value),a=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},o),r=a.ele;if(r){r.style.position="relative",r.style.overflow="hidden";var s=r.getBoundingClientRect(),i=r.querySelector(".waves-ripple");switch(i?i.className="waves-ripple":(i=document.createElement("span"),i.className="waves-ripple",i.style.height=i.style.width=Math.max(s.width,s.height)+"px",r.appendChild(i)),a.type){case"center":i.style.top=s.height/2-i.offsetHeight/2+"px",i.style.left=s.width/2-i.offsetWidth/2+"px";break;default:i.style.top=(l.pageY-s.top-i.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",i.style.left=(l.pageX-s.left-i.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return i.style.backgroundColor=a.color,i.className="waves-ripple z-active",!1}}return e[s]?e[s].removeHandle=l:e[s]={removeHandle:l},l}var n={bind:function(e,t){e.addEventListener("click",i(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[s].removeHandle,!1),e.addEventListener("click",i(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[s].removeHandle,!1),e[s]=null,delete e[s]}},m={name:"TaskCreate",directives:{waves:n},data:function(){return{form:{opt_user_agent:navigator.userAgent,limit_enable:!0,limit_parallelism:1,opt_request_timeout:10,id:this.$route.params.id},ruleOpts:[],routeID:this.$route.params.id,loadData:!1,isEdit:!1,on_submit_loading:!1,submit_disable:!1,rules:{task_name:[{required:!0,message:"任务名称不能为空",trigger:"blur"}],task_rule_name:[{required:!0,message:"请选择抓取规则名称",trigger:"change"}]}}},created:function(){this.getRules(),this.routeID&&this.getTaskRuleList(),this.routeID&&(this.isEdit=!0)},methods:{getTaskRuleList:function(){var e=this;this.loadData=!0,Object(r["d"])(this.routeID).then((function(t){var l=t.data;e.form=l,e.loadData=!1,setTimeout((function(){e.loadData=!1}),1500)}))},getRules:function(){var e=this;Object(r["c"])().then((function(t){e.ruleOpts=t.data,setTimeout((function(){}),1500)}))},on_submit_form:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;e.on_submit_loading=!0,Object(r["e"])(e.form).then((function(t){var l=t.data;e.$message.success("操作成功!  task id:"+l.id+"  2s后跳转到列表页面"),e.on_submit_loading=!1,e.submit_disable=!0,setTimeout((function(){return e.$router.push({name:"taskList"})}),2e3)})).catch((function(){e.on_submit_loading=!1}))}))}}},u=m,c=l("2877"),f=Object(c["a"])(u,o,a,!1,null,null,null);t["default"]=f.exports},b199:function(e,t,l){"use strict";l.d(t,"b",(function(){return a})),l.d(t,"d",(function(){return r})),l.d(t,"c",(function(){return s})),l.d(t,"g",(function(){return i})),l.d(t,"f",(function(){return n})),l.d(t,"e",(function(){return m})),l.d(t,"a",(function(){return u}));var o=l("b775");function a(e){return Object(o["a"])({url:"/webapi/tasks",method:"get",params:e})}function r(e){return Object(o["a"])({url:"/webapi/tasks/"+e,method:"get"})}function s(){return Object(o["a"])({url:"/webapi/tasks/rules",method:"get"})}function i(e){return Object(o["a"])({url:"/webapi/tasks/"+e+"/stop",method:"get"})}function n(e){return Object(o["a"])({url:"/webapi/tasks/"+e+"/start",method:"get"})}function m(e){return Object(o["a"])({url:"/webapi/tasks",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/webapi/tasks/"+e+"/delete",method:"get"})}}}]);